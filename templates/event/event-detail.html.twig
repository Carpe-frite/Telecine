{% extends "base.html.twig"  %}

{% block main %}
    <main class="relative w-[1000px] h-14/20 left-1/2 -translate-x-1/2 mt-12">

        <div id="core-view" class="relative w-[1000px] flex flex-row justify-between">
    
            <div id="column-1" class="relative w-full flex flex-col gap-y-4">            
                <h1 class="absolute">{{ event.eventName }}</h1>
                <div id="event-detail" class="flex w-full h-[500px] bg-neutral-300 gap-x-4">         
                    <div class="ml-4 mt-16">      
                        <img class="flex w-72 h-[390px] max-w-[330px]" src="{{ asset('images/placeholder_poster.webp') }}" alt="Poster de la séance">
                    </div>
                    <div class="mr-4 mt-18">
                        <h2>{{ event.eventMovie }} par John Doe</h2>        
                        <h3>Science-fiction, Aventure | Canada, 1978</h3>            
                        <p>{{ event.eventDetail }}</p>        
                        <p>Avec</p> 
                        <hr>
                        <div>cc</div>
                        <hr>
                        <h2>Séance proposée par {{ event.getUser().userName }}</h2>    
                        <ul class="flex space-x-4 mt-2">
                            {% for participation in event.participants %}
                                <li class="relative w-14 group">
                                    {% if participation.getUser().userId == event.getUser().userId %}
                                            <img src="{{ asset('icons/user_host_icon.png') }}" alt="Icone utilisateur"></i>
                                            <div class="absolute flex bg-sky-900 justify-center w-14 opacity-0 group-hover:opacity-100 duration-700 ease-in-out">{{ participation.getUser().userName }}</div>
                                    {% elseif participation.getUser().userId != event.getUser().userId %}
                                        {% if participation.userHasConfirmed== true %}
                                            <img src="{{ asset('icons/user_icon.png') }}" alt="Icone utilisateur"></i>
                                            <div class="absolute flex bg-sky-900 justify-center w-14 opacity-0 group-hover:opacity-100 duration-700 ease-in-out">{{ participation.getUser().userName }}</div>
                                        {% elseif participation.userHasConfirmed== false %}
                                            <img src="{{ asset('icons/user_not_confirmed_icon.png') }}" alt="Icone utilisateur"></i>
                                            <div class="absolute flex bg-sky-900 justify-center w-14 opacity-0 group-hover:opacity-100 duration-700 ease-in-out">{{ participation.getUser().userName }}</div>
                                        {% endif %}
                                    {% endif %}
                                </li>
                            {% endfor %}
                        </ul>
                    </div>                
            </div>

                {% if app.user %}
                <div id="event-dashboard" class="flex w-full h-[150px] bg-neutral-300 justify-center items-end p-4 gap-x-4">
                    {% if app.user.userId == event.getUser().userId %}
                        <div>
                            <a href="{{path('event_delete_event', { 'id' : event.eventId}) }}">
                                <div class="bg-red-200 w-[210px] h-[50px]">Supprimer la séance</div>
                            </a>
                        </div>
                        <div>
                            <a href="{{path('event_edit_event', { 'id' : event.eventId}) }}">
                            <div class="bg-neutral-500 w-[210px] h-[50px]">Modifier la séance</div>
                            </a>
                        </div>
                    {% endif %}

                    {% if app.user.userId != event.getUser().userId %}
                        {% if isAdmin %}
                            <div>
                                <a href="{{path('event_validate_event', { 'id' : event.eventId}) }}">
                                    <div class="bg-red-200 w-[210px] h-[50px]">Valider la séance</div>
                                </a>
                            </div>
                            <div>
                                <a href="{{path('event_delete_event', { 'id' : event.eventId}) }}">
                                    <div class="bg-red-200 w-[210px] h-[50px]">Supprimer la séance</div>
                                </a>
                            </div>
                            <div>
                                <a href="{{path('event_edit_event', { 'id' : event.eventId}) }}">
                                <div class="bg-neutral-500 w-[210px] h-[50px]">Modifier la séance</div>
                                </a>
                            </div>
                        {% endif %}
                        <div>
                            <a href="{{path('event_take_part_in_event', { 'id' : event.eventId, 'confirm' : 'true'}) }}">
                                <div class="bg-neutral-500 w-[210px] h-[50px]">Je participe !</div>
                            </a>
                        </div>
                        <div>
                            <a href="{{path('event_take_part_in_event', { 'id' : event.eventId, 'confirm' : 'false'}) }}">
                                <div class="bg-neutral-500 w-[210px] h-[50px]">Pourquoi pas !</div>
                            </a>
                        </div>
                        {% for participation in event.participants %}
                            {% if participation.getUser().userId == app.user.userId  %}
                                <div>
                                    <div class="bg-neutral-500 w-[210px] h-[50px]">Vous participez à cette séance !</div>
                                </div>
                            {% endif %}   
                        {% endfor %}
                    {% endif %}     
                {% endif %}     

                </div>  
        </div>
    </main>

{% endblock %}
